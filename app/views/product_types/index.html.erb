<div class="container">
  <h1>Product Categories</h1>
  <br>
  <%= link_to 'Back', url_for(:back) %>
  <br>
  <br>
  <table>
    <tr>
      <th>Category</th>
      <th>Total Products</th>
      <th>Product Titles</th>
      <th>Inventory</th>
    </tr>
    <% @product_types.each do |prod_type|%>
      <tr>
        <td>
          <%= link_to prod_type.category, product_type_path(prod_type.id) %></td>
        <td><%= prod_type.products.count %></td>
        <% @category_products = prod_type.products.limit(3) %>
        <% @category_products.each do |titles| %>
          <% if @category_products.count > 1 %>
            <tr>
              <td></td>
              <td></td>
              <td><%= link_to titles[:title], product_path(titles) %></td>
              <td>Remaining Inventory: <%= titles[:quantity] %> | Price: <%= number_to_currency(titles[:price]) %></td>
            </tr>
          <% else  %>
            <td><%= link_to titles[:title], product_path(titles) %></td>
            <td>Remaining Inventory: <%= titles[:quantity] %> | Price: <%= number_to_currency(titles[:price]) %></td>
          <% end %>
        <% end %>
      </tr>
    <% end %>
  </table>
</div>
